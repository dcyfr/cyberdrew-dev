@tailwind base;
@tailwind components;
@tailwind utilities;

/* Simplified design system using standard shadcn/ui and Tailwind CSS */

@layer base {
  html {
  font-family: 'Geist', ui-sans-serif, system-ui, sans-serif;
  /* Help browsers style native controls appropriately */
  color-scheme: light;
  }

  /* Prevent layout/transition jank during initial load */
  html.preload *, html.preload *::before, html.preload *::after {
    transition: none !important;
    animation: none !important;
  }

  :root {
    /* Geist-inspired color system */
    --background: 0 0% 100%;
    --foreground: 0 0% 9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;

    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;

    --accent: 0 0% 96%;
    --accent-foreground: 0 0% 9%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 89%;
    --input: 0 0% 89%;
    --ring: 0 0% 9%;

    --radius: 0.375rem;

    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 0 0% 9%;
    --sidebar-primary: 0 0% 9%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 0 0% 96%;
    --sidebar-accent-foreground: 0 0% 9%;
    --sidebar-border: 0 0% 89%;
    --sidebar-ring: 0 0% 9%;

    /* Accent colors */
    --accent-blue: 208 100% 47%;
    --accent-violet: 262 83% 58%;
    --accent-pink: 330 81% 60%;
    --accent-green: 158 64% 52%;
    --accent-yellow: 39 100% 57%;
    --accent-red: 0 91% 71%;

    /* Subtle shadow system */
    --shadow-sm: 0 1px 2px hsl(0 0% 0% / 0.04);
    --shadow: 0 1px 3px hsl(0 0% 0% / 0.1), 0 1px 2px hsl(0 0% 0% / 0.06);
    --shadow-md: 0 4px 6px hsl(0 0% 0% / 0.07), 0 2px 4px hsl(0 0% 0% / 0.06);
    --shadow-lg: 0 10px 15px hsl(0 0% 0% / 0.1), 0 4px 6px hsl(0 0% 0% / 0.05);
    --shadow-xl: 0 20px 25px hsl(0 0% 0% / 0.1), 0 10px 10px hsl(0 0% 0% / 0.04);

  /* Let native form controls pick up theme color (2025 trend: use system affordances) */
  accent-color: hsl(var(--primary));
  }

  .dark {
    /* Dark mode - true black */
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;

    --card: 0 0% 0%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 0%;
    --popover-foreground: 0 0% 98%;

    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;

    --secondary: 0 0% 9%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 9%;
    --muted-foreground: 0 0% 63%;

    --accent: 0 0% 9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62% 30%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 11%;
    --input: 0 0% 11%;
    --ring: 0 0% 83%;

    --sidebar-background: 0 0% 0%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 0 0% 98%;
    --sidebar-primary-foreground: 0 0% 9%;
    --sidebar-accent: 0 0% 9%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 11%;
    --sidebar-ring: 0 0% 83%;

    /* Accent colors for dark mode */
    --accent-blue: 208 100% 47%;
    --accent-violet: 262 83% 58%;
    --accent-pink: 330 81% 60%;
    --accent-green: 158 64% 52%;
    --accent-yellow: 39 100% 57%;
    --accent-red: 0 91% 71%;

    /* Enhanced shadow system for dark mode */
    --shadow-sm: 0 1px 2px hsl(0 0% 0% / 0.3);
    --shadow: 0 1px 3px hsl(0 0% 0% / 0.4), 0 1px 2px hsl(0 0% 0% / 0.3);
    --shadow-md: 0 4px 6px hsl(0 0% 0% / 0.5), 0 2px 4px hsl(0 0% 0% / 0.4);
    --shadow-lg: 0 10px 15px hsl(0 0% 0% / 0.6), 0 4px 6px hsl(0 0% 0% / 0.5);
  --shadow-xl: 0 20px 25px hsl(0 0% 0% / 0.7), 0 10px 10px hsl(0 0% 0% / 0.6);

  /* Align native controls and scrollbars with dark mode */
  color-scheme: dark;
  accent-color: hsl(var(--primary));
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-sans text-base leading-normal;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
  /* Default smooth scrolling; will be disabled when reduced motion is set */
  html { scroll-behavior: smooth; }
  
  /* Respect prefers-reduced-motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation: none !important;
      transition-duration: 0.01ms !important;
      transition-delay: 0ms !important;
      scroll-behavior: auto !important;
    }
  }
  
  /* Modern text wrapping for nicer rags */
  @supports (text-wrap: balance) {
    h1, h2, h3 { text-wrap: balance; }
  }
  @supports (text-wrap: pretty) {
    p { text-wrap: pretty; }
  }
  
  /* Consistent, accessible focus rings */
  a:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  [tabindex="0"]:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }
  
  /* Subtle, motion-safe link animation */
  a {
    transition: color .15s ease, text-decoration-color .15s ease, transform .15s ease;
  }
  @media (prefers-reduced-motion: no-preference) {
    a:hover { transform: translateY(-1px); }
  }

  /* Progressive View Transitions hook (scoped) */
  .vt-container { view-transition-name: root; }
  
  /* When users request higher contrast, further emphasize outlines */
  @media (prefers-contrast: more) {
    a:focus-visible,
    button:focus-visible,
    [role="button"]:focus-visible,
    [tabindex="0"]:focus-visible {
      outline-width: 3px;
      outline-offset: 3px;
    }
  /* Strengthen chip and link colors under higher contrast */
  .prose-content a { text-decoration-thickness: 2px; }
  .badge, .prose .badge, [data-variant="chip"] { border-color: hsl(var(--foreground)) !important; }
  }
  
  /* Ensure sidebar inset area maintains space to prevent vertical shift */
  [data-sidebar="sidebar"], .group\/sidebar-wrapper, .peer[data-variant], .peer[data-state] {
    will-change: auto;
  }
}

/* Blog content styling using standard Tailwind Typography */
@layer components {
  .prose-content {
    @apply prose prose-gray dark:prose-invert max-w-none font-sans;
  }
  
  .prose-content h1 {
    @apply text-4xl font-bold font-sans tracking-tight;
  }
  
  .prose-content h2 {
    @apply text-3xl font-semibold font-sans tracking-tight mt-8 mb-4;
  }
  
  .prose-content h3 {
    @apply text-2xl font-medium font-sans tracking-tight mt-6 mb-3;
  }
  
  .prose-content h4 {
    @apply text-xl font-medium font-sans tracking-tight mt-5 mb-2;
  }
  
  .prose-content p {
    @apply text-foreground leading-relaxed my-4 font-sans;
  }
  
  /* Lists: keep UL and OL spacing consistent */
  .prose-content ul {
    @apply list-disc pl-6 space-y-1 font-sans;
  }
  
  .prose-content ol {
    @apply list-decimal pl-6 space-y-1 font-sans;
  }
  
  /* Ensure list items themselves don't add extra margins (typography defaults) */
  .prose-content li {
    @apply leading-relaxed my-0 pl-2 font-sans;
  }
  
  /* Nested lists get tighter spacing and smaller indent equally for UL/OL */
  .prose-content li > ul,
  .prose-content li > ol {
    @apply my-1 pl-4 space-y-1;
  }
  
  .prose-content strong {
    @apply font-semibold font-sans;
  }
  
  .prose-content a {
    @apply text-foreground underline underline-offset-2 decoration-border hover:decoration-foreground transition-colors font-sans;
  }
  
  .prose-content blockquote {
    @apply border-l-2 border-border pl-6 italic text-muted-foreground my-8 bg-muted/30 py-4 rounded-r-lg font-sans;
  }
  
  .prose-content code {
    @apply rounded-md font-mono bg-muted px-1.5 py-0.5 text-xs text-foreground;
  }
  
  .prose-content pre {
    @apply bg-muted border border-border p-4 rounded-lg overflow-x-auto my-8 text-sm font-mono;
  }
  
  .prose-content pre code {
    @apply bg-transparent p-0 text-sm font-mono;
  }
  
  .prose-content hr {
    @apply border-border my-12 border-t;
  }
}
