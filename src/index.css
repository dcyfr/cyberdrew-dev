@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  html {
    font-family: 'Geist', ui-sans-serif, system-ui, sans-serif;
  }

  /* Prevent layout/transition jank during initial load */
  html.preload *, html.preload *::before, html.preload *::after {
    transition: none !important;
    animation: none !important;
  }

  /* Pre-reserve sidebar gap for blog routes to prevent nav width shift */
  /* No longer needed since PageLayout renders within SidebarInset; reserved via spacer */

  :root {
    /* Geist-inspired color system */
    --background: 0 0% 100%;
    --foreground: 0 0% 9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;

    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;

    --accent: 0 0% 96%;
    --accent-foreground: 0 0% 9%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 89%;
    --input: 0 0% 89%;
    --ring: 0 0% 9%;

    --radius: 0.375rem;

    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 0 0% 9%;
    --sidebar-primary: 0 0% 9%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 0 0% 96%;
    --sidebar-accent-foreground: 0 0% 9%;
    --sidebar-border: 0 0% 89%;
    --sidebar-ring: 0 0% 9%;

    /* Accent colors */
    --accent-blue: 208 100% 47%;
    --accent-violet: 262 83% 58%;
    --accent-pink: 330 81% 60%;
    --accent-green: 158 64% 52%;
    --accent-yellow: 39 100% 57%;
    --accent-red: 0 91% 71%;

    /* Subtle shadow system */
    --shadow-sm: 0 1px 2px hsl(0 0% 0% / 0.04);
    --shadow: 0 1px 3px hsl(0 0% 0% / 0.1), 0 1px 2px hsl(0 0% 0% / 0.06);
    --shadow-md: 0 4px 6px hsl(0 0% 0% / 0.07), 0 2px 4px hsl(0 0% 0% / 0.06);
    --shadow-lg: 0 10px 15px hsl(0 0% 0% / 0.1), 0 4px 6px hsl(0 0% 0% / 0.05);
    --shadow-xl: 0 20px 25px hsl(0 0% 0% / 0.1), 0 10px 10px hsl(0 0% 0% / 0.04);
  }

  .dark {
    /* Dark mode - true black */
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;

    --card: 0 0% 0%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 0%;
    --popover-foreground: 0 0% 98%;

    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;

    --secondary: 0 0% 9%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 9%;
    --muted-foreground: 0 0% 63%;

    --accent: 0 0% 9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62% 30%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 11%;
    --input: 0 0% 11%;
    --ring: 0 0% 83%;

    --sidebar-background: 0 0% 0%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 0 0% 98%;
    --sidebar-primary-foreground: 0 0% 9%;
    --sidebar-accent: 0 0% 9%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 11%;
    --sidebar-ring: 0 0% 83%;

    /* Accent colors for dark mode */
    --accent-blue: 208 100% 47%;
    --accent-violet: 262 83% 58%;
    --accent-pink: 330 81% 60%;
    --accent-green: 158 64% 52%;
    --accent-yellow: 39 100% 57%;
    --accent-red: 0 91% 71%;

    /* Enhanced shadow system for dark mode */
    --shadow-sm: 0 1px 2px hsl(0 0% 0% / 0.3);
    --shadow: 0 1px 3px hsl(0 0% 0% / 0.4), 0 1px 2px hsl(0 0% 0% / 0.3);
    --shadow-md: 0 4px 6px hsl(0 0% 0% / 0.5), 0 2px 4px hsl(0 0% 0% / 0.4);
    --shadow-lg: 0 10px 15px hsl(0 0% 0% / 0.6), 0 4px 6px hsl(0 0% 0% / 0.5);
    --shadow-xl: 0 20px 25px hsl(0 0% 0% / 0.7), 0 10px 10px hsl(0 0% 0% / 0.6);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
  /* Ensure sidebar inset area maintains space to prevent vertical shift */
  [data-sidebar="sidebar"], .group\/sidebar-wrapper, .peer[data-variant], .peer[data-state] {
    will-change: auto;
  }
  
  /* Enhanced animations and transitions */
  .hover-scale {
    @apply transition-transform duration-200 hover:scale-105;
  }
  
  .hover-lift {
    @apply transition-all duration-300 hover:-translate-y-1 hover:shadow-lg;
  }
  
  .hover-glow {
    @apply transition-all duration-300 hover:shadow-lg hover:shadow-primary/25;
  }
  
  .story-link {
    @apply relative inline-block;
  }
  
  .story-link::after {
    @apply content-[''] absolute w-full scale-x-0 h-0.5 bottom-0 left-0 bg-primary origin-bottom-right transition-transform duration-300;
  }
  
  .story-link:hover::after {
    @apply scale-x-100 origin-bottom-left;
  }

  /* Card components */
  .modern-card {
    @apply cursor-pointer rounded-lg border border-border bg-card p-6 
           transition-all duration-200 hover:shadow-md;
  }

  .modern-card-sm {
    @apply cursor-pointer rounded-lg border border-border bg-card p-4 
           transition-all duration-200 hover:shadow-sm;
  }

  .modern-card-lg {
    @apply cursor-pointer rounded-lg border border-border bg-card p-8 
           transition-all duration-200 hover:shadow-lg;
  }

.blog-content h1 {
  @apply text-4xl font-semibold text-foreground leading-[1.1] tracking-tight;
}

@layer utilities {
  /* Motion-safe background panning and rotation for the blueprint grid */
  @media (prefers-reduced-motion: no-preference) {
    .bg-pan-slow {
      animation: bg-pan 28s linear infinite;
    }
    .bg-rotate-slower {
      animation: bg-rotate 120s linear infinite;
    }
  }

  @keyframes bg-pan {
    0% { transform: translate3d(0, 0, 0); }
    50% { transform: translate3d(-40px, -24px, 0); }
    100% { transform: translate3d(0, 0, 0); }
  }

  @keyframes bg-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
}

.blog-content h2 {
  @apply text-3xl font-semibold text-foreground mt-8 mb-4 leading-[1.2] tracking-tight;
}

.blog-content h3 {
  @apply text-2xl font-medium text-foreground mt-6 mb-2 leading-[1.3] tracking-tight;
}

.blog-content h4 {
  @apply text-xl font-medium text-foreground mt-4 mb-2 leading-[1.4];
}

.blog-content p {
  @apply text-foreground leading-[1.7] mt-4 mb-4 text-[15px];
}

.blog-content ul, .blog-content ol {
  @apply text-foreground leading-[1.7] text-sm;
}

.blog-content ul {
  @apply list-disc ml-6;
}

.blog-content ol {
  @apply list-decimal ml-6;
}

.blog-content li {
  @apply leading-[1.7] pl-2;
}

/* Custom styling for converted markdown list items */
.blog-list-item {
  @apply text-[15px] leading-[1.7] text-foreground;
}

.blog-content strong {
  @apply font-semibold;
}

.blog-content a {
  @apply text-foreground underline underline-offset-[3px] decoration-border hover:decoration-foreground transition-colors;
}

.blog-content blockquote {
  @apply border-l-2 border-border pl-6 italic text-muted-foreground my-8 bg-muted/30 py-4 rounded-r-lg;
}

.blog-content code {
  @apply bg-muted px-2 py-1 rounded-md text-sm font-mono text-foreground;
}

.blog-content pre {
  @apply bg-muted border border-border p-4 rounded-lg overflow-x-auto my-8 text-sm;
}

.blog-content pre code {
  @apply bg-transparent p-0 text-sm;
  white-space: pre-wrap; /* Ensures long lines wrap */
  word-wrap: break-word; /* Breaks words if necessary to prevent overflow */
}

.blog-content hr {
  @apply border-border my-12 border-t;
}

/* headings with better spacing */
.theme-heading {
  @apply font-semibold tracking-tight text-foreground;
}

.theme-heading-1 {
  @apply theme-heading text-5xl leading-[1.1] mb-8;
}

.theme-heading-2 {
  @apply theme-heading text-4xl leading-[1.1] mb-6;
}

.theme-heading-3 {
  @apply theme-heading text-3xl leading-[1.2] mb-4;
}

.theme-text {
  @apply text-[15px] leading-[1.7] text-foreground;
}

.theme-text-muted {
  @apply text-[14px] leading-[1.6] text-muted-foreground;
}

/* Utility classes */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
}
